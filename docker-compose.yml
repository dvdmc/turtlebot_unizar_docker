services:
  turtlebot_unizar:
    image: turtlebot_unizar
    build:
      context: ./docker/
      dockerfile: Dockerfile
    container_name: turtlebot_unizar
    environment:
      DISPLAY: $DISPLAY
      ROS_LOCALHOST_ONLY: 0
      TURTLEBOT3_MODEL: wafffle
      GAZEBO_MODEL_PATH: /opt/ros/humble/share/turtlebot3_gazebo/models
      # ROS_DISCOVERY_SERVER: 127.0.0.1:11811
      
    privileged: true
    volumes:
      # X11
      - ~/.Xauthority:/root/.Xauthority
      # 
      - /dev/kobuki:/dev/kobuki
      # Code
      - ./catkin_ws:/root/catkin_ws
    network_mode: "host"
    command: tail -f /dev/null

  # discovery_server:
  #   image: osrf/ros:humble-desktop
  #   container_name: discovery_server
  #   network_mode: host
  #   command: fastdds discovery --ip-address 192.168.0.150 -p 11811
  #   environment:
  #     - ROS_DISCOVERY_SERVER=127.0.0.1:11811
  #   profiles:
  #     - ground_station